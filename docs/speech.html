<!DOCTYPE html>  <html> <head>   <title>speech.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="capkomsymbolwidget.html">                 capkomsymbolwidget.coffee               </a>                                           <a class="source" href="ttswidget.html">                 ttswidget.coffee               </a>                                           <a class="source" href="navigation.html">                 navigation.coffee               </a>                                           <a class="source" href="profile.html">                 profile.coffee               </a>                                           <a class="source" href="speech.html">                 speech.coffee               </a>                                           <a class="source" href="stages.html">                 stages.coffee               </a>                                           <a class="source" href="symbolset.html">                 symbolset.coffee               </a>                                           <a class="source" href="symbolsets.html">                 symbolsets.coffee               </a>                                           <a class="source" href="wizard.html">                 wizard.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               speech.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>This module controls the speech output of the wizard. 
The backend being used is the MARY Text-to-Speech System developed by DFKI.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Capkom</span><span class="p">.</span><span class="nx">Speech</span>
    <span class="nv">constructor: </span><span class="nf">(options) -&gt;</span>
        <span class="vi">@options = </span><span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="nx">@options</span><span class="p">,</span> <span class="nx">options</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Default parameters defined (to be extended if necessary)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">options:</span>
        <span class="nv">maryBaseUri: </span><span class="s2">&quot;http://dev.iks-project.eu/mary&quot;</span>
        <span class="nv">robotSelected: </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>For letting the computer speak a new text</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">say: </span><span class="nf">(text) -&gt;</span>
        <span class="nx">@_init</span><span class="p">()</span> <span class="nx">unless</span> <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;#speech&quot;</span><span class="p">).</span><span class="nx">length</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">@el</span> <span class="p">).</span><span class="nx">attr</span> <span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="nx">@_makeLink</span> <span class="vi">@text = </span><span class="nx">text</span>
        <span class="nx">@el</span><span class="p">.</span><span class="nx">load</span><span class="p">()</span>
        <span class="nx">@el</span><span class="p">.</span><span class="nx">play</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Repeat the last text (if any).</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">repeat: </span><span class="o">-&gt;</span>
        <span class="vi">@el.currentTime = </span><span class="mi">0</span>
        <span class="nx">@el</span><span class="p">.</span><span class="nx">load</span><span class="p">()</span>
        <span class="nx">@el</span><span class="p">.</span><span class="nx">play</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Remove last text.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">clear: </span><span class="o">-&gt;</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">@el</span> <span class="p">).</span><span class="nx">attr</span> <span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Module initialisation makes sure the existence of an HTML5 audio element</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">_init: </span><span class="o">-&gt;</span>
        <span class="vi">@el = </span><span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;#speech&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nx">unless</span> <span class="nx">@el</span>
            <span class="vi">@el = </span><span class="nx">jQuery</span><span class="p">(</span><span class="s1">&#39;&lt;audio id=&quot;speech&quot; controls=&quot;controls&quot; style=&quot;display:none;&quot; src=&quot;&quot; type=&quot;audio/ogg&quot;&gt;Your browser does not support the audio tag.&lt;/audio&gt;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Internal method for implementing the audio uri.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">_makeLink: </span><span class="nf">(text) -&gt;</span>
        <span class="nx">@options</span><span class="p">.</span><span class="nx">maryBaseUri</span> <span class="o">+</span> <span class="s2">&quot;/process?&quot;</span> <span class="o">+</span> <span class="p">[</span>
            <span class="s2">&quot;INPUT_TYPE=TEXT&amp;OUTPUT_TYPE=AUDIO&amp;INPUT_TEXT=#{encodeURIComponent text}&quot;</span>
            <span class="s2">&quot;LOCALE=de&quot;</span>
            <span class="s2">&quot;VOICE=bits3&quot;</span>
            <span class="s2">&quot;OUTPUT_TEXT=&quot;</span>
            <span class="s2">&quot;effect_Volume_selected=&quot;</span>
            <span class="s2">&quot;effect_Volume_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;amount:2.0;&quot;</span>
            <span class="s2">&quot;effect_Volume_default=Default&quot;</span>
            <span class="s2">&quot;effect_Volume_help=Help&quot;</span>
            <span class="s2">&quot;effect_TractScaler_selected=&quot;</span>
            <span class="s2">&quot;effect_TractScaler_parameters&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;amount:1.5;&quot;</span>
            <span class="s2">&quot;effect_TractScaler_default=Default&quot;</span>
            <span class="s2">&quot;effect_TractScaler_help=Help&quot;</span>
            <span class="s2">&quot;effect_F0Scale_selected=&quot;</span>
            <span class="s2">&quot;effect_F0Scale_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;f0Scale:2.0;&quot;</span>
            <span class="s2">&quot;effect_F0Scale_default=Default&quot;</span>
            <span class="s2">&quot;effect_F0Scale_help=Help&quot;</span>
            <span class="s2">&quot;effect_F0Add_selected=&quot;</span>
            <span class="s2">&quot;effect_F0Add_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;f0Add:50.0;&quot;</span>
            <span class="s2">&quot;effect_F0Add_default=Default&quot;</span>
            <span class="s2">&quot;effect_F0Add_help=Help&quot;</span>
            <span class="s2">&quot;effect_Rate_selected=&quot;</span>
            <span class="s2">&quot;effect_Rate_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;durScale:1.5;&quot;</span>
            <span class="s2">&quot;effect_Rate_default=Default&quot;</span>
            <span class="s2">&quot;effect_Rate_help=Help&quot;</span>
            <span class="s2">&quot;effect_Robot_selected=&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">@options</span><span class="p">.</span><span class="nx">robotSelected</span> <span class="o">?</span> <span class="s2">&quot;on&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="s2">&quot;effect_Robot_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;amount:100.0;&quot;</span>
            <span class="s2">&quot;effect_Robot_default=Default&quot;</span>
            <span class="s2">&quot;effect_Robot_help=Help&quot;</span>
            <span class="s2">&quot;effect_Whisper_selected=&quot;</span>
            <span class="s2">&quot;effect_Whisper_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;amount:100.0;&quot;</span>
            <span class="s2">&quot;effect_Whisper_default=Default&quot;</span>
            <span class="s2">&quot;effect_Whisper_help=Help&quot;</span>
            <span class="s2">&quot;effect_Stadium_selected=&quot;</span>
            <span class="s2">&quot;effect_Stadium_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;amount:100.0&quot;</span>
            <span class="s2">&quot;effect_Stadium_default=Default&quot;</span>
            <span class="s2">&quot;effect_Stadium_help=Help&quot;</span>
            <span class="s2">&quot;effect_Chorus_selected=&quot;</span>
            <span class="s2">&quot;effect_Chorus_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;delay1:466;amp1:0.54;delay2:600;amp2:-0.10;delay3:250;amp3:0.30&quot;</span>
            <span class="s2">&quot;effect_Chorus_default=Default&quot;</span>
            <span class="s2">&quot;effect_Chorus_help=Help&quot;</span>
            <span class="s2">&quot;effect_FIRFilter_selected=&quot;</span>
            <span class="s2">&quot;effect_FIRFilter_parameters=&quot;</span> <span class="o">+</span> <span class="nb">encodeURI</span> <span class="s2">&quot;type:3;fc1:500.0;fc2:2000.0&quot;</span>
            <span class="s2">&quot;effect_FIRFilter_default=Default&quot;</span>
            <span class="s2">&quot;effect_FIRFilter_help=Help&quot;</span>
            <span class="s2">&quot;effect_JetPilot_selected=&quot;</span>
            <span class="s2">&quot;effect_JetPilot_parameters=&quot;</span>
            <span class="s2">&quot;effect_JetPilot_default=Default&quot;</span>
            <span class="s2">&quot;effect_JetPilot_help=Help&quot;</span>
            <span class="s2">&quot;HELP_TEXT=&quot;</span>
            <span class="s2">&quot;VOICE_SELECTIONS=bits3%20de%20male%20unitselection%20general&quot;</span>
            <span class="s2">&quot;AUDIO_OUT=WAVE_FILE&quot;</span>
            <span class="s2">&quot;AUDIO=WAVE_FILE&quot;</span>
        <span class="p">].</span><span class="nx">join</span> <span class="s1">&#39;&amp;&#39;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 